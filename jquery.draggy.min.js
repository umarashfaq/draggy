(function(a){"use strict";var b;b=function(){function b(b,c){this.target=b;this.jq_target=a(b).draggy("kill");this.options=c||{};this.setupDefaults();this.init()}b.prototype.setupDefaults=function(){this.CURSOR_DRAGGABLE="move";this.CURSOR_DRAGGING="move";this.options.z_index=999;this.options.scrollbar_container_color="transparent";this.options.scrollbar_container_border="1px solid transparent";this.options.scrollbar_container_hover_color="#F2F2F2";this.options.scrollbar_container_hover_border="1px solid #D9D9D9";this.options.scrollbar_color="#CBCBCB";this.options.scrollbar_border="1px solid #B6B6B6";this.options.scrollbar_hover_color="#909090";this.options.scrollbar_hover_border="1px solid #666666"};b.prototype.init=function(){var b=this,c=10,d=a("body"),e=function(a){b.mousedown(a);return false},f=this.jq_target.css({cursor:this.CURSOR_DRAGGABLE,position:"relative"}).mousedown(e).data("draggy",this),g=function(a){b.scroll(a)},h=function(a,c,d,e){b.mousewheel(a,c,d,e)},i=f.parent().css({position:"relative",overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}).bind("mousewheel",h).scroll(g),j=i.parent(),k=f.width(),l=f.height(),m=f.outerWidth(true),n=f.outerHeight(true),o=i.offset(),p=i.width(),q=i.height(),r=i.outerWidth(true),s=i.outerHeight(true),t=r-p,u=s-q,v=r<m,w=s<n,x,y,z,A,B,C,D,E,F,G,H,I,J,K=function(a){b.mousemoveDoc(a);return false},L=function(a){b.mouseupDoc(a);return false},M=a(document).mousemove(K).mouseup(L),N,O,P,Q,R,S;if(w){i.css({"float":"left"}).width(function(){return a(this).width()-c-2});m=f.outerWidth(true);n=f.outerHeight(true);o=i.offset();p=i.width();q=i.height();r=i.outerWidth(true);s=i.outerHeight(true);y=a("<div/>").addClass("__draggy").addClass("__vertical").addClass("__state_1").height(q-2).mouseover(function(a){return b.mouseoverScrollYContainer(a)}).mouseout(function(a){return b.mouseoutScrollYContainer(a)}).insertAfter(i);z=a("<br/>").css({clear:"both"}).insertAfter(y);F=y.offset();G=y.height();H=y.outerHeight(true);I=(n>s?s/n:1)*H-2;J=a("<div/>").mouseover(function(a){return b.mouseoverScrollY(a)}).mouseout(function(a){return b.mouseoutScrollY(a)}).mousedown(function(a){return b.mousedownScrollY(a)}).height(I).appendTo(y);Q=J.outerHeight(true);R=J.offset();S=(H-Q)/(n-q)}if(v){x=a("<div/>").addClass("__draggy").addClass("__horizontal").addClass("__state_1").width(i.width()).mouseover(function(a){return b.mouseoverScrollContainer(a,true)}).mouseout(function(a){return b.mouseoutScrollContainer(a)}).insertAfter(i);A=x.offset();B=x.width();C=x.outerWidth(true);D=(k>p?p/k:1)*B;E=a("<div/>").width(D).mouseover(function(a){return b.mouseoverScroll(a)}).mouseout(function(a){return b.mouseoutScroll(a)}).mousedown(function(a){return b.mousedownScroll(a)}).appendTo(x);N=E.outerWidth(true);O=E.offset();P=(B-D)/(k-p)}this.jq_doc=M;this.jq_parent=i;this.jq_scroll_x=E;this.jq_scroll_y=J;this.jq_scroll_container_x=x;this.jq_scroll_container_y=y;this.displacement_factor_x=P;this.displacement_factor_y=S;this.scroll_x_outer_width=N;this.container_x_outer_width=C;this.__mousedownTargetHandler=e;this.__scrollParentHandler=g;this.__mousewheelParentHandler=h;this.__mousemoveDocHandler=K;this.__mouseupDocHandler=L};b.prototype.mousedown=function(a){this.is_mouse_down=true;this.mouse_down_point={x:a.pageX,y:a.pageY};this.scroll_left=this.jq_parent.scrollLeft();this.scroll_top=this.jq_parent.scrollTop();var b=this.jq_target.css({cursor:this.CURSOR_DRAGGING})};b.prototype.mousewheel=function(a,b,c,d){var e=this.jq_parent,f=e.scrollLeft();e.scrollLeft(f+c*30)};b.prototype.mouseup=function(a){this.is_mouse_down=false;var b=this.jq_target.css({cursor:this.CURSOR_DRAGGABLE})};b.prototype.mousemove=function(a){var b=this.jq_parent,c=this.is_mouse_down,d=this.scroll_left,e=this.scroll_top,f=this.mouse_down_point,g,h,i,j;if(c){g={x:a.pageX,y:a.pageY};h={x:f.x-g.x,y:f.y-g.y};i=d+h.x;j=e+h.y;b.scrollLeft(i);b.scrollTop(j)}};b.prototype.getStateClasses=function(a,b){return(b.match(/\b__state_\d{1}/g)||[]).join(" ")};b.prototype.setState=function(a,b){b=b?b:1;var c="__state_"+b,d=a==="y"?this.jq_scroll_container_y:this.jq_scroll_container_x;d.removeClass(this.getStateClasses).addClass(c)};b.prototype.mouseoverScrollContainer=function(a,b){console.log("[mouseoverScrollContainer] mouseover scroll_container_x detected.");this.setState("x",2);this.is_mouse_over_scroll_x_container=true;return false};b.prototype.mouseoutScrollContainer=function(a){console.log("[mouseoutScrollContainer] mouseout scroll_container_x detected.");this.setState("x");this.is_mouse_over_scroll_x_container=false;return false};b.prototype.mouseoverScroll=function(a){console.log("[mouseoutScroll] mouseover scroll_x detected.");if(!this.is_mouse_down_on_scroll_x){this.setState("x",3)}this.is_mouse_over_scroll_x=true;return false};b.prototype.mouseoutScroll=function(a){console.log("[mouseoutScroll] mouseout scroll_x detected.");if(!this.is_mouse_down_on_scroll_x){this.setState("x")}this.is_mouse_over_scroll_x=false;return false};b.prototype.mousedownScroll=function(a){var b=this.jq_scroll_container_x,c=this.jq_scroll_x,d=c.position().left+2,e=c.css("left");this.setState("x",4);e=e.substring(0,e.indexOf("px"));this.is_mouse_down_on_scroll_x=true;this.scroll_left=d;this.mouse_down_point={x:a.pageX,y:a.pageY};return false};b.prototype.mouseupScroll=function(a){if(this.is_mouse_over_scroll_x){this.setState("x",3)}else{this.setState("x")}this.is_mouse_down_on_scroll_x=false};b.prototype.mousemoveScroll=function(a){var b=this.jq_scroll_x,c=this.jq_parent,d=this.scroll_left,e=this.mouse_down_point,f={x:a.pageX,y:a.pageY},g={x:e.x-f.x,y:e.y-f.y},h=this.displacement_factor_x,i=(d-g.x)/h,j=this.scroll_x_outer_width,k=this.container_x_outer_width;c.scrollLeft(i)};b.prototype.mouseoverScrollY=function(a){if(!this.is_mouse_down_on_scroll_y){this.setState("y",3)}this.is_mouse_over_scroll_y=true;return false};b.prototype.mouseoutScrollY=function(a){if(!this.is_mouse_down_on_scroll_y){this.setState("y")}this.is_mouse_over_scroll_y=false;return false};b.prototype.mousedownScrollY=function(a){var b=this.jq_scroll_y,c=b.position().top+2;this.setState("y",4);this.is_mouse_down_on_scroll_y=true;this.scroll_top=c;this.mouse_down_point={x:a.pageX,y:a.pageY};return false};b.prototype.mouseupScrollY=function(a){if(this.is_mouse_over_scroll_y){this.setState("y",3)}else{this.setState("y")}this.is_mouse_down_on_scroll_y=false};b.prototype.mousemoveScrollY=function(a){var b=this.jq_scroll_y,c=this.jq_parent,d=this.scroll_top,e=this.mouse_down_point,f={x:a.pageX,y:a.pageY},g={x:e.x-f.x,y:e.y-f.y},h=this.displacement_factor_y,i=(d-g.y)/h;console.log("[mousemoveScrollY] ( original_top("+d+") - distance.y("+g.y+") ) / displacement_factor_y ("+h+") = "+i);c.scrollTop(i)};b.prototype.mouseoverScrollYContainer=function(a){this.setState("y",2);this.is_mouse_over_scroll_y_container=true;return false};b.prototype.mouseoutScrollYContainer=function(a){this.setState("y");this.is_mouse_over_scroll_y_container=false;return false};b.prototype.mousemoveDoc=function(a){var b=this.is_mouse_down_on_scroll_x,c=this.is_mouse_down_on_scroll_y,d=this.is_mouse_down;if(d){this.mousemove(a)}else if(b){this.mousemoveScroll(a)}else if(c){this.mousemoveScrollY(a)}};b.prototype.mouseupDoc=function(a){var b=this.is_mouse_down_on_scroll_x,c=this.is_mouse_over_scroll_x,d=this.is_mouse_over_scroll_x_container,e=this.is_mouse_down_on_scroll_y,f=this.is_mouse_over_scroll_y,g=this.is_mouse_over_scroll_x_container,h=this.is_mouse_down;console.log("is_mouse_over_scroll_x_container: "+d);if(b){this.mouseupScroll(a)}if(e){this.mouseupScrollY(a)}if(h){this.mouseup(a)}};b.prototype.scroll=function(a){var b=this.jq_parent,c=b.scrollLeft(),d=b.scrollTop(),e=this.jq_scroll_container_x,f,g,h,i=this.jq_scroll_container_y,j,k,l;if(e){f=e.offset();g=this.displacement_factor_x;h=this.jq_scroll_x.offset({left:f.left+c*g})}if(i){j=i.offset();k=this.displacement_factor_y;l=this.jq_scroll_y.offset({top:j.top+d*k});console.log("container_y_offset.top("+j.top+") + ( scroll_top("+d+") * displacement_factor_y("+k+") ) = "+(j.top+d*k))}};b.prototype.destroy=function(a){var b=this.jq_doc,c=this.jq_parent,d=this.jq_target,e=this.jq_scroll_container_x,f=this.jq_scroll_container_y;if(e){e.remove()}if(f){f.remove()}d.unbind("mousedown",this.__mousedownTargetHandler);c.unbind("scroll",this.__scrollParentHandler).unbind("mousewheel",this.__mousewheelParentHandler);b.unbind("mousemove",this.__mousemoveDocHandler).unbind("mouseup",this.__mouseupDocHandler);d.removeData("draggy")};b.kill=function(b){var c=a(b),d=c.data("draggy");if(d){d.destroy()}};return b}();a.fn.draggy=function(a){return this.each(function(){if(a==="kill"){b.kill(this)}else{return new b(this,a)}})}})(jQuery)